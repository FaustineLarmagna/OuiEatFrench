{% extends 'OuiEatFrenchFarmerBundle::layout.html.twig' %}

{% block content %}
	<div class="row">
		<div class="col-md-10">
			<h3>{{farmer.firstname | title}}, voici les commandes qui vont ont été faites :</h3>
		</div>
	</div>

	{% for flashMessage in app.session.flashbag.get('error') %}
	    <div class="alert alert-error">{{ flashMessage }}</div>
	{% endfor %}
	{% for flashMessage in app.session.flashbag.get('info') %}
	    <div class="alert alert-info">{{ flashMessage }}</div>
	{% endfor %}

	{% for command in commands %}
	    <div style="width:1024px;margin:auto;margin-bottom:50px;">
	    	<div style="background-color:white;height:40px;padding:10px;line-height:40px;">{{command.cart.user.username}} ({{command.farmerProductClones|length}})<span style="text-align:right"><a href="{{path('oui_eat_french_farmer_command_ready', {'id' : command.id})}}">Valider</a><a href="{{path('oui_eat_french_farmer_command_closed', {'id' : command.id})}}">Cloturer</a></span></div>
	    	<div style="background-color:none;height:100px;padding:10px;">
	    		{% set total = 0 %}
				{% for farmerProductClone in command.farmerProductClones %}
					{% set total = total + (farmerProductClone.quantity*farmerProductClone.unitPrice) %}
					<div style="width:225px;height:50px;float:left;text-align:center;">
						{{farmerProductClone.product.name}}<br>{{farmerProductClone.quantity}}({{farmerProductClone.unitType.name}})
					</div>
				{% endfor %}
	    	</div>
	    	<div style="text-align:right;background-color:white;height:40px;padding:10px;">Total : <strong>{{total|number_format(2, '.', ',')}}€</strong></div>
	    </div>
	{% endfor %}
{% endblock %}